<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CoAN-SAFE Algorithm</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background-color: #f5f6f7;
    }

    h1 {
      color: #0a2f66;
    }

    .box {
      background: #eec9e7;
      border: 2px solid #ccc;
      padding: 20px;
      margin-top: 20px;
      border-radius: 10px;
    }

    .recommendation-box {
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      border: 1px solid #999;
      white-space: pre-wrap;
    }

    .avoid { background-color: #f65513; }
    .caution { background-color: #ffc000; }
    .possible { background-color: #70ad47; }

    select, label, input[type=checkbox], button {
      font-size: 16px;
    }

    #logo {
      height: 4cm;
      width: 4cm;
      margin-bottom: 20px;
    }

    .checkbox-group label {
      display: block;
      margin: 5px 0;
    }

    .references {
      font-size: 10px;
      margin-top: 40px;
      color: #333;
    }

    @media (max-width: 600px) {
      body { padding: 15px; }
      h1 { font-size: 20px; }
      #logo { height: 2.5cm; width: 2.5cm; }
    }
  </style>
</head>

<body>

<img src="netpharm_logo_znacka.png" id="logo" alt="NETPHARM Logo">

<h1>
  CoAN-SAFE ALGORITHM:<br>
  Optimising the Use of Psychotropic Coanalgesics in Frail Older Adults<br>
  with Hepatorenal and/or Cardiorenal Syndromes and Neuropathic Pain
</h1>

<p><em>
A Clinical Algorithm Developed Under the NETPHARM Project
(New Technologies for Translational Research in Pharmaceutical Sciences).
Project ID CZ.02.01.01/00/22_008/0004607, co-funded by the European Union.
</em></p>

<p>
The CoAN-SAFE algorithm is a safety-oriented clinical decision-support tool
for the use of psychotropic co-analgesics in frail older adults with neuropathic
pain and multimorbidity.
</p>

<div class="box">

  <label for="painType"><strong>1. Select type of neuropathic pain:</strong></label>
  <select id="painType" onchange="showMedications()">
    <option value="">-- Choose --</option>
    <option value="diabetic">Diabetic neuropathy</option>
    <option value="postherpetic">Postherpetic neuropathy</option>
    <option value="trigeminal">Trigeminal neuralgia</option>
    <option value="central">Central pain</option>
    <option value="unspecified">Neuropathic pain ‚Äì not specified / off-label</option>
  </select>

  <div id="medicationsBox" style="display:none; margin-top:15px;">
    <label for="medication"><strong>2. Select medication:</strong></label>
    <select id="medication" onchange="showComorbidities()"></select>
  </div>

  <div id="comorbidityBox" style="display:none; margin-top:20px;">
    <label><strong>3. Select comorbidities:</strong></label>
    <div class="checkbox-group">
      <label><input type="checkbox" value="renal"> Renal impairment</label>
      <label><input type="checkbox" value="hepatic"> Hepatic impairment</label>
      <label><input type="checkbox" value="cardiac"> Cardiovascular risk</label>
      <label><input type="checkbox" value="frailty"> Frailty</label>
    </div>
    <button type="button" onclick="showRecommendations()">Show recommendations</button>
  </div>

  <div id="recommendation" style="margin-top:20px;"></div>

</div>

<div class="references">
  EFNS 2010 ¬∑ NICE CG173 ¬∑ CPS 2022 ¬∑ AAN 2022
</div>

<script>
/* ---------------- DRUG OPTIONS ---------------- */

const drugOptions = {
  diabetic: ["Amitriptyline", "Duloxetine", "Venlafaxine", "Gabapentin", "Pregabalin"],
  postherpetic: ["Amitriptyline", "Duloxetine", "Venlafaxine", "Gabapentin", "Pregabalin"],
  trigeminal: ["Carbamazepine"],
  central: ["Amitriptyline", "Duloxetine", "Venlafaxine", "Gabapentin", "Pregabalin"],
  unspecified: ["Amitriptyline", "Duloxetine", "Venlafaxine", "Gabapentin", "Pregabalin", "Carbamazepine"]
};

/* ---------------- RECOMMENDATIONS (DEMO) ---------------- */
/* üëâ TADY JEN NAHRAƒé TYTO TEXTY SV√ùMI P≈ÆVODN√çMI */

const recommendations = {
  duloxetine: {
    renal: `<div class="recommendation-box caution"><b>RENAL:</b><br>Use with caution.</div>`,
    hepatic: `<div class="recommendation-box avoid"><b>HEPATIC:</b><br>Avoid duloxetine.</div>`,
    cardiac: `<div class="recommendation-box caution"><b>CARDIAC:</b><br>Use with caution.</div>`,
    frailty: `<div class="recommendation-box caution"><b>FRAILTY:</b><br>Increased fall risk.</div>`
  }
};

/* ---------------- FUNCTIONS ---------------- */

function showMedications() {
  const painType = document.getElementById("painType").value;
  const medicationSelect = document.getElementById("medication");
  document.getElementById("recommendation").innerHTML = "";
  document.getElementById("comorbidityBox").style.display = "none";

  medicationSelect.innerHTML = '<option value="">-- Choose --</option>';

  if (drugOptions[painType]) {
    drugOptions[painType].forEach(drug => {
      const opt = document.createElement("option");
      opt.value = drug.toLowerCase();
      opt.textContent = drug;
      medicationSelect.appendChild(opt);
    });
    document.getElementById("medicationsBox").style.display = "block";
  }
}

function showComorbidities() {
  document.getElementById("comorbidityBox").style.display = "block";
  document.getElementById("recommendation").innerHTML = "";
}

function showRecommendations() {
  const med = document.getElementById("medication").value;
  const boxes = document.querySelectorAll(".checkbox-group input[type=checkbox]");
  const out = document.getElementById("recommendation");

  let html = "";

  boxes.forEach(cb => {
    if (cb.checked && recommendations[med] && recommendations[med][cb.value]) {
      html += recommendations[med][cb.value];
    }
  });

  out.innerHTML = html || '<div class="recommendation-box">No recommendation available.</div>';
}
</script>

</body>
</html>
